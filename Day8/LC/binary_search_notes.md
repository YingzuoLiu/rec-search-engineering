# Binary Search Notes（二分查找）

---
## 一、定义

**二分查找 = 在一个「具有单调性」的搜索空间里，  
通过判断 mid，排除一半不可能答案。**

关键词只有两个：
- **单调性**
- **排除一半**

---

## 二、二分到底在“二分”什么？

二分不是只用在数组上，它可以二分三种东西：

---

### ① 二分【值】——找某个元素
**代表：LC704**

- 搜索空间：数组下标
- 判断条件：`nums[mid] == target`
- 找不到：返回 -1
- target 不存在 → 问题失去意义

👉 这是最“表面”的二分

---

### ② 二分【位置 / 边界】——找规则第一次成立的地方
**代表：LC35 / LC34**

- 搜索空间：下标 i
- 判断条件：  
  - `nums[i] >= target`  
  - `nums[i] > target`
- 即使 target 不存在，答案依然存在
- 插入位置 = 边界本身

👉 本质：**找边界，不是插入**

---

### ③ 二分【答案】——找最小 / 最大可行解
**代表：LC875 / LC410 / LC1011**

- 搜索空间：答案取值范围（速度 / 容量 / 天数）
- 数组只是用来验证答案
- 判断形式：
  - mid 可行 / 不可行
- 单调性：  
  - mid 越大，越容易满足  
  - 或 mid 越小，越容易满足

👉 这是最容易被忽略、但最重要的一类二分

---

## 三、LC704 vs LC35（必分清）

| 对比点 | LC704 | LC35 |
|---|---|---|
| 在找什么 | 值 | 位置边界 |
| 判断条件 | `== target` | `>= target` |
| target 不存在 | 返回 -1 | 返回插入点 |
| 是否总有答案 | ❌ | ✅ |
| 本质 | 查找 | 规则边界 |

**强制判断法**：  
> 如果 target 不存在，这题还有意义吗？  
- 没意义 → 704  
- 有意义 → 35

---

## 四、二分 vs 滑动窗口

### 共同点
- 都有 `[left, right]`
- 都在“缩小范围”

### 本质区别（一定要记）

| 维度 | 二分查找 | 滑动窗口 |
|---|---|---|
| 范围里是什么 | **假设的答案** | **真实数据区间** |
| 是否排除一半 | ✅ | ❌ |
| 是否所有元素都会看 | ❌ | ✅ |
| 关键动作 | 判断 mid | 扩张 / 收缩 |

**一句区分**：  
> 二分是在“猜答案”  
> 滑窗是在“修区间”

---

## 五、什么时候「一定要想到二分」

看到下面信号，**优先考虑二分**：

- 有序 / 排好序
- 第一个 / 最后一个
- 插入位置
- 最小 / 最大
- 能不能做到 / 是否可行
- 随着 x 变化，结果只会变好或变坏（单调）

---

## 六、什么时候「一定不是二分」

出现这些情况，**直接排除二分**：

- 连续子数组 / 子串
- 需要维护窗口内状态
- 不能通过一次判断排除一半
- 结果依赖“所有元素都被看过”

👉 这些通常是：
- 滑动窗口
- 双指针
- 哈希

---

## 七、防止选错的「三问兜底法」

写代码前，强制问自己：

### 1️⃣ 我能不能通过一个判断，排除一半可能性？
- 不能 → 不是二分

### 2️⃣ 我这个区间里装的是“答案”还是“数据”？
- 数据 → 滑窗 / 指针  
- 答案 → 二分

### 3️⃣ 如果目标不存在，问题还成立吗？
- 不成立 → 找值  
- 还成立 → 边界 / 答案二分

---

## 八、常见误区

❌ “返回 index，所以不是二分”  
❌ “插入听起来不像查找”  
❌ “滑动窗口也是区间，所以一样”  

✅ 正确认知：
- 返回什么 ≠ 找什么
- 插入只是结果，不是问题
- 区间的**维度**比形状重要

---

## 九、二分题常见分类速查

### 找值
- LC704 Binary Search

### 找边界
- LC35 Search Insert Position
- LC34 Find First and Last Position

### 找答案
- LC69 Sqrt(x)
- LC875 Koko Eating Bananas
- LC410 Split Array Largest Sum
- LC1011 Capacity To Ship Packages

---

> **二分查找不是数组技巧，  
> 而是一种“用单调性减少搜索空间”的思维方式。**

